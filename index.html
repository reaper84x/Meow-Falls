<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meow Falls</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(to bottom, #f5e6ca, #f3d1a3);
            color: #3c3c3b;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        canvas {
            border: 2px solid #fff;
            background-color: #ffe9c4;
        }
        #score {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 20px;
        }
        #greeting {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #ffeed3;
            padding: 20px;
            box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            display: none;
            text-align: center;
        }
        #pause {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #f08a5d;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
        }
        #gameOver {
            display: none;
            font-size: 24px;
            color: #d9534f;
        }
        #resume, #restart {
            display: none;
            font-size: 18px;
            color: #fff;
            background: #5cb85c;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="400" height="600"></canvas>
    <div id="score">Score: 0</div>
    <div id="greeting">Welcome to <b>Meow Falls</b>! Catch as many kittens as you can and avoid letting them fall. Credit: Salman Groovin</div>
    <div id="pause">Pause</div>
    <div id="gameOver">Game Over!</div>
    <div id="resume" onclick="resumeGame()">Resume</div>
    <div id="restart" onclick="startGame()">Restart</div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        const kittenImg = new Image();
        kittenImg.src = "https://i.postimg.cc/1tFcd8RR/20241112-222215.png";

        const basketImg = new Image();
        basketImg.src = "https://i.postimg.cc/PrSZ2Wbz/20241112-221823.png";

        let score = 0;
        let gameInterval;
        let kittens = [];
        let speed = 2;
        let isGameOver = false;
        let isPaused = false;

        const basket = {
            x: canvas.width / 2 - 35,
            y: canvas.height - 70,
            width: 70,
            height: 60,
        };

        class Kitten {
            constructor(x, y, speed) {
                this.x = x;
                this.y = y;
                this.speed = speed;
                this.size = 50;
            }

            draw() {
                ctx.drawImage(kittenImg, this.x, this.y, this.size, this.size);
            }

            update() {
                this.y += this.speed;
            }
        }

        function spawnKitten() {
            const x = Math.random() * (canvas.width - 50);
            kittens.push(new Kitten(x, 0, speed));
        }

        function detectCollision(kitten) {
            return (
                kitten.x < basket.x + basket.width &&
                kitten.x + kitten.size > basket.x &&
                kitten.y + kitten.size > basket.y &&
                kitten.y < basket.y + basket.height
            );
        }

        function updateGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(basketImg, basket.x, basket.y, basket.width, basket.height);

            kittens.forEach((kitten, index) => {
                kitten.update();
                kitten.draw();

                if (kitten.y > canvas.height) {
                    kittens.splice(index, 1);
                    endGame();
                } else if (detectCollision(kitten)) {
                    score++;
                    kittens.splice(index, 1);
                    document.getElementById("score").innerText = `Score: ${score}`;

                    if (score % 10 === 0) {
                        speed += 0.5;
                    }
                }
            });

            if (Math.random() < 0.02) spawnKitten();
        }

        canvas.addEventListener("touchmove", (event) => {
            event.preventDefault();
            const touchX = event.touches[0].clientX;
            const rect = canvas.getBoundingClientRect();
            basket.x = Math.min(canvas.width - basket.width, Math.max(0, touchX - rect.left - basket.width / 2));
        }, { passive: false });

        document.getElementById("pause").addEventListener("click", () => {
            if (isPaused) {
                resumeGame();
            } else {
                pauseGame();
            }
        });

        function startGame() {
            document.getElementById("greeting").style.display = "none";
            document.getElementById("gameOver").style.display = "none";
            document.getElementById("resume").style.display = "none";
            document.getElementById("restart").style.display = "none";
            score = 0;
            speed = 2;
            isGameOver = false;
            kittens = [];
            gameInterval = setInterval(updateGame, 20);
        }

        function endGame() {
            isGameOver = true;
            clearInterval(gameInterval);
            document.getElementById("gameOver").style.display = "block";
            document.getElementById("restart").style.display = "block";
        }

        function pauseGame() {
            isPaused = true;
            clearInterval(gameInterval);
            document.getElementById("resume").style.display = "block";
            document.getElementById("pause").innerText = "Paused";
        }

        function resumeGame() {
            isPaused = false;
            gameInterval = setInterval(updateGame, 20);
            document.getElementById("resume").style.display = "none";
            document.getElementById("pause").innerText = "Pause";
        }

        window.onload = () => {
            document.getElementById("greeting").style.display = "block";
        };

        startGame();
    </script>
</body>
</html>
